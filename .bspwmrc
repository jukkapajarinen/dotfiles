#!/bin/bash

# ##############################################################################
# bspwm monitor workspace setup
# ##############################################################################

hdmiConnected=$(xrandr -q | grep "HDMI-2 connected" &> /dev/null; echo $?);
if [[ "$hdmiConnected" == "0" ]]; then
  bspc monitor eDP-1 -d 1 2 3 4;
  bspc monitor HDMI-2 -d 5 6 7 8;
else
  bspc monitor eDP-1 -d 1 2 3 4 5 6 7 8;
fi

# ##############################################################################
# bspwm auto-start applications
# ##############################################################################

bash ~/dotfiles/scripts/polybar-launcher.sh;
pgrep -f sxhkd || sxhkd &
pgrep -f compton || compton &
pgrep -f xscreensaver || xscreensaver -no-splash &
pgrep -f nitrogen || nitrogen --restore &
pgrep -f nm-applet || nm-applet &
pgrep -f pasystray || pasystray &
pgrep -f megasync || megasync &
pgrep -f blueman-applet || blueman-applet &
pgrep -f caffeine-indicator || caffeine-indicator &
pgrep -f clipit || clipit &

# ##############################################################################
# bspwm setup configurations
# ##############################################################################

bspc config initial_polarity second_child;
bspc config top_padding 36;
bspc config right_padding 8;
bspc config bottom_padding 8;
bspc config left_padding 8;
bspc config window_gap 8;
bspc config border_width 0;
bspc config pointer_modifier mod1; # Opt_L => mod1
bspc config pointer_action1 move;
bspc config pointer_action2 resize_corner;
bspc config focus_follows_pointer false;
bspc config pointer_follows_focus false;

# ##############################################################################
# bspwm window rules
# ##############################################################################
bspc rule -a Gimp state=floating;
bspc rule -a MEGAsync state=floating;
