#!/bin/bash

# ##############################################################################
# Bash theme and color configurations
# ##############################################################################

# Custom colors
reset="\033[0;0m";
gray="\033[0;37m";
red="\033[0;91m";
green="\033[0;92m";
yellow="\033[0;93m";
blue="\033[0;94m";
magenta="\033[0;95m";

# Parse git branch
git_branch() { 
  if git status &> /dev/null; then
    branch=$(git branch 2> /dev/null | grep "\*" | awk '{print $2}');
    [[ "$(git status -s)" == "" ]] && status_color=$green || status_color=$red;
    echo " on\[${status_color}\] ${branch}\[${gray}\]";
  fi
}

# Parse git user
git_user() { 
  if git status &> /dev/null; then
    full_name=$(git config --get user.email | awk '{print "("$1")"}');
    echo " \[${yellow}\]${full_name}\[${gray}\]";
  fi
}

# Git stuff
git_stuff() {
  echo "$(git_branch)$(git_user)";
}

# Full prompt command
prompt_command() {
  echo "\[${magenta}\]\u\[${gray}\] in \[${blue}\]\W\[${gray}\]$(git_stuff) \\$\[${reset}\] ";
}

# Set environment variables
export PROMPT_COMMAND='PS1=$(prompt_command)';
export LESS_TERMCAP_mb=$(printf "\e[01;34m");
export LESS_TERMCAP_md=$(printf "\e[01;35m");
export LESS_TERMCAP_me=$(printf "\e[0m");
export LESS_TERMCAP_se=$(printf "\e[0m");
export LESS_TERMCAP_so=$(printf "\e[01;34m");
export LESS_TERMCAP_ue=$(printf "\e[0m");
export LESS_TERMCAP_us=$(printf "\e[04;33m");
